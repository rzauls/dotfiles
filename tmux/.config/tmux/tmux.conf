# Set prefix (leader)
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# 24-bit colors
set-option -sa terminal-overrides ",xterm*:Tc"

# ShiftAlt-h/l to switch windows
bind -n M-H previous-window
bind -n M-L next-window

# Allow mouse scroll
set -g mouse on

# Resize the panes with prefix+arrow keys
bind -r Up resize-pane -U 2
bind -r Down resize-pane -D 2
bind -r Left resize-pane -L 5
bind -r Right resize-pane -R 5

# Yanking sanity
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# 1-index window and pane numbers
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

# status bar on top
set-option -g status-position top

set -g @plugin 'tmux-plugins/tpm' # Plugin manager
set -g @plugin 'tmux-plugins/tmux-sensible' # Less terrible default config
set -g @plugin 'christoomey/vim-tmux-navigator' # Pane navigation helper
set -g @plugin 'tmux-plugins/tmux-yank' # Yanking from tmux buffer
set -g @plugin 'laktak/extrakto' # Fuzzy-select strings fom previous buffer output
set -g @plugin 'tmux-plugins/tmux-resurrect' # Restore sessions after system restart

# WIN: Fix wsl escape sequence issue when escape-time is 0
set -sg escape-time 1

# Shorten delay after switching modes in nvim
set -s escape-time 50

# Split pane in cwd
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

run ~/.tmux/plugins/tpm/tpm
